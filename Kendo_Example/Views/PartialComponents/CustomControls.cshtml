@using Kendo_Example.Models;

@model CustomControls


            @{foreach (var item in Model.Control)
                {
                    if (item.ControlType == ControlType.button)
                    {
                        @(Html.Kendo().Button()
                        .Name(item.Id)
                        //.Tag("a")
                        .Icon(item.ImageClass)
                        .Content(item.Title)
                        .Events(events => events.Click("function(event){customButtonClick(event," + item.JsData.Text + ");}")))
                    }
                }


            }

<div id="dialog" />

<script>
    function customButtonClick(event, additional) {
        console.log(event);
        console.log(additional);

        var dialog = $('#dialog');

        dialog.kendoDialog({
            width: "150px",
            height: "100px",
            title: "Dialog box",
            closable: true,
            modal: false,
            content: additional.process_text
        });

        if (additional.question) {
            if (confirm(additional.question_text)) {
                //TODO

                $.ajax({
                    url: '@Url.Action("CallRecalcProcedure", "ProcedureCall")' + '?procname=' + additional.procedure,
                    type: 'GET',
                    beforeSend: function( xhr ) {
                        console.log(xhr);
                        dialog.data("kendoDialog").open();
                    },
                    success: function (data) {
                        on_Alertify(data, "success");
                        dialog.data("kendoDialog").close();
                    },
                    error: function (jq, status, message) {
                        on_Alertify(message, "error");
                        dialog.data("kendoDialog").close();
                    }
                });

                if (additional.refresh) {
                    document.location.href = document.location.origin + document.location.pathname + '?' + 'filename=' + additional.xml_link;
                }

            }

        }
    }
</script>